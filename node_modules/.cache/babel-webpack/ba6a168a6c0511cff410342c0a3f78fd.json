{"ast":null,"code":"import _asyncToGenerator from \"/home/ggomez/Escritorio/KeyBoardTale/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/components/header/header.component\";\nimport * as i2 from \"../shared/components/footer/footer.component\";\nexport class LayoutComponent {\n  constructor() {\n    this.cagada = \"No estan los archivos la concha de la lora\";\n    this.texts = [[], []]; // textos divididos en substrings\n\n    this.currentText = 0; // texto al que pertenece el subtring que se esta mostrando\n\n    this.currentSub = 0; // substring que se muestra en pantalla\n\n    this.instructions = \"\"; // instrucciones del juego\n    //audios: Audio[] = [];\n\n    this.alreadyShown = \"\";\n    this.playerInput = \"\"; // lo que el jugador esta ingresando en tiempo real\n\n    this.audios = []; // coleccion de todos los audios\n\n    this.substringInput = [];\n    this.substringScore = [];\n    this.substringSound = [];\n    this.substringValue = [];\n    this.minValues = [];\n  }\n\n  ngOnInit() {\n    this.fetchTexts().then(() => this.fetchSound()).then(() => {\n      this.initializeMatrixes();\n      this.setMinValues();\n      this.setSounds();\n      this.setSubstringValues();\n      document.addEventListener('keydown', event => {\n        this.processInput(event.key);\n      });\n      this.cagada = \"Si estan los archivos\";\n    });\n  }\n\n  setSubstringValues() {\n    for (let t = 0; t < this.texts.length; t++) {\n      for (let s = 0; s < this.texts[t].length; s++) {\n        for (let i = 0; i < this.texts[t][s].length; i++) {\n          if (65 <= this.texts[t][s].charCodeAt(i) && this.texts[t][s].charCodeAt(i) <= 90) {\n            // mayusculas\n            this.substringValue[t][s][this.texts[t][s].charCodeAt(i) - 55] += 1;\n          } else if (97 <= this.texts[t][s].charCodeAt(i) && this.texts[t][s].charCodeAt(i) <= 122) {\n            // minusculas\n            this.substringValue[t][s][this.texts[t][s].charCodeAt(i) - 87] += 1;\n          } else if (48 <= this.texts[t][s].charCodeAt(i) && this.texts[t][s].charCodeAt(i) <= 57) {\n            // numeros\n            this.substringValue[t][s][this.texts[t][s].charCodeAt(i) - 48] += 1;\n          }\n        }\n      }\n    }\n\n    console.log('values: ', this.substringValue[0]);\n  }\n\n  setSounds() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield fetch('/assets/texts/indiceAudios.txt').then(data => data.text());\n      let instances = result.match(/.*Audio\\.txt/g);\n\n      for (let i = 0; i < instances.length; i++) {\n        let j = 0;\n        yield fetch('/assets/texts/' + instances[i]).then(data => data.text()).then(text => {\n          let arrays = text.match(/\\[(.*)\\]/g);\n          arrays.forEach(value => {\n            _this.substringSound[i][j] = _this.textToValues(value);\n            j++;\n          });\n        });\n      }\n    })();\n  }\n\n  setMinValues() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = yield fetch('/assets/texts/indiceValores.txt').then(data => data.text());\n      let instances = result.match(/.*Valores\\.txt/g);\n\n      for (let i = 0; i < instances.length; i++) {\n        let j = 0;\n        yield fetch('/assets/texts/' + instances[i]).then(data => data.text()).then(text => {\n          let arrays = text.match(/\\[(.*)\\]/g);\n          arrays.forEach(value => {\n            _this2.minValues[i][j] = _this2.textToValues(value);\n            j++;\n          });\n        });\n      }\n    })();\n  }\n\n  textToValues(value) {\n    let valuesArray = [];\n    value.split(/\\[|\\]/)[1].split(',').forEach(value => valuesArray.push(+value));\n    return valuesArray;\n  }\n\n  fetchTexts() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield fetch('/assets/texts/instrucciones.txt').then(data => data.text()).then(text => _this3.instructions = text);\n      let result = yield fetch('/assets/texts/indice.txt').then(data => data.text());\n      let instances = result.match(/([a-z]*[A-Z]*[0-9]*)*\\.txt/g);\n\n      for (let i = 0; i < instances.length; i++) {\n        let j = 0;\n        yield fetch('/assets/texts/' + instances[i]).then(data => data.text()).then(text => {\n          _this3.textToFrases(text).forEach(frase => {\n            _this3.texts[i][j] = frase;\n            j++;\n          });\n        });\n      }\n    })();\n  }\n\n  textToFrases(text) {\n    let ret = [];\n    text.split(/\\|\\|\\|/).forEach(frase => {\n      ret.push(frase);\n    });\n    return ret;\n  }\n\n  fetchSound() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      let result = \"\";\n      yield fetch('/assets/sounds/audios.txt').then(data => data.text()).then(text => result = text);\n      let instances = result.match(/(.*\\.wav)/g);\n\n      for (let i = 0; i < instances.length; i++) {\n        _this4.audios.push(new Audio('/assets/sounds/' + instances[i]));\n      }\n    })();\n  }\n\n  processInput(text) {\n    for (let i = 0; i < text.length; i++) {\n      if (65 <= text.charCodeAt(i) && text.charCodeAt(i) <= 90) {\n        // mayusculas\n        this.substringInput[this.currentText][this.currentSub][text.charCodeAt(i) - 55] += 1;\n        if (this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i) - 55] !== 0) this.audios[this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i) - 55]].play();\n      } else if (97 <= text.charCodeAt(i) && text.charCodeAt(i) <= 122) {\n        // minusculas\n        this.substringInput[this.currentText][this.currentSub][text.charCodeAt(i) - 87] += 1;\n        if (this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i) - 87] !== 0) this.audios[this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i) - 87]].play();\n      } else if (48 <= text.charCodeAt(i) && text.charCodeAt(i) <= 57) {\n        // numeros\n        this.substringInput[this.currentText][this.currentSub][text.charCodeAt(i) - 48] += 1;\n        if (this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i) - 48] !== 0) this.audios[this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i) - 48]].play();\n      }\n    }\n\n    this.playerInput = \"\";\n    this.calculateScore();\n  }\n\n  initializeMatrixes() {\n    for (let t = 0; t < this.texts.length; t++) {\n      this.substringInput[t] = new Array();\n      this.substringScore[t] = new Array();\n      this.substringSound[t] = new Array();\n      this.substringValue[t] = new Array();\n      this.minValues[t] = new Array();\n\n      for (let s = 0; s < this.texts[t].length; s++) {\n        this.substringInput[t][s] = new Array();\n        this.substringScore[t][s] = new Array();\n        this.substringSound[t][s] = new Array();\n        this.substringValue[t][s] = new Array();\n        this.minValues[t][s] = new Array();\n\n        for (let n = 0; n < 37; n++) {\n          this.substringInput[t][s][n] = 0;\n          this.substringScore[t][s][n] = 0;\n          this.substringSound[t][s][n] = 0;\n          this.substringValue[t][s][n] = 0;\n          this.minValues[t][s][n] = 0;\n        }\n      }\n    }\n  }\n\n  calculateScore() {\n    let ret = true;\n\n    for (let i = 0; i < this.substringScore[0][0].length; i++) {\n      if (this.substringValue[this.currentText][this.currentSub][i] !== 0) {\n        this.substringScore[this.currentText][this.currentSub][i] = this.substringInput[this.currentText][this.currentSub][i] / this.substringValue[this.currentText][this.currentSub][i];\n      } else {\n        this.substringScore[this.currentText][this.currentSub][i] = 1;\n      }\n    }\n\n    let index = 0;\n\n    while (ret && index < this.substringScore[0][0].length) {\n      ret = this.substringScore[this.currentText][this.currentSub][index] >= this.minValues[this.currentText][this.currentSub][index];\n      index++;\n    }\n\n    console.log(this.substringScore[this.currentText][this.currentSub]);\n    console.log(this.minValues[this.currentText][this.currentSub]);\n    if (ret) this.nextSub();\n  }\n\n  nextSub() {\n    if (this.currentSub < this.texts[this.currentText].length - 1) {\n      this.alreadyShown += this.texts[this.currentText][this.currentSub];\n      this.currentSub++;\n    } else if (this.currentText < this.texts.length - 1) {\n      this.currentText++;\n      this.currentSub = 0;\n    } else {//something something\n    }\n  }\n\n}\n\nLayoutComponent.ɵfac = function LayoutComponent_Factory(t) {\n  return new (t || LayoutComponent)();\n};\n\nLayoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LayoutComponent,\n  selectors: [[\"app-layout\"]],\n  decls: 5,\n  vars: 0,\n  consts: [[2, \"width\", \"100%\", \"height\", \"100%\", \"display\", \"flex\", \"flex-direction\", \"column\", \"justify-content\", \"space-between\"]],\n  template: function LayoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\");\n      i0.ɵɵelement(2, \"app-header\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(3, \" LPM \");\n      i0.ɵɵelement(4, \"app-footer\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i1.HeaderComponent, i2.FooterComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.content-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  background: lightgreen;\\n}\\n\\n.instrucciones-container[_ngcontent-%COMP%] {\\n  max-width: 70%;\\n  max-height: 10%;\\n  background: red;\\n}\\n\\n.instrucciones[_ngcontent-%COMP%] {\\n  font-family: \\\"EB Garamond\\\", serif;\\n  font-size: x-large;\\n}\\n\\n.texto-container[_ngcontent-%COMP%] {\\n  width: 70%;\\n  height: 100%;\\n  background: grey;\\n  text-align: justify;\\n}\\n\\n.texto-negro[_ngcontent-%COMP%] {\\n  font-family: \\\"EB Garamond\\\", serif;\\n  font-size: x-large;\\n}\\n\\n.texto-rojo[_ngcontent-%COMP%] {\\n  font-family: \\\"EB Garamond\\\", serif;\\n  font-size: x-large;\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxheW91dC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0FBQ0o7O0FBRUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7QUFDSjs7QUFFQTtFQUNJLGNBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtBQUNKOztBQUVBO0VBQ0ksaUNBQUE7RUFDQSxrQkFBQTtBQUNKOztBQUNBO0VBQ0ksVUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FBRUo7O0FBQUE7RUFDSSxpQ0FBQTtFQUNBLGtCQUFBO0FBR0o7O0FBREE7RUFDSSxpQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsVUFBQTtBQUlKIiwiZmlsZSI6ImxheW91dC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXJ7XG4gICAgd2lkdGg6MTAwJTtcbiAgICBoZWlnaHQ6MTAwJTtcbn1cblxuLmNvbnRlbnQtY29udGFpbmVye1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBkaXNwbGF5OmZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGJhY2tncm91bmQ6IGxpZ2h0Z3JlZW47XG4gICAgXG59XG4uaW5zdHJ1Y2Npb25lcy1jb250YWluZXJ7XG4gICAgbWF4LXdpZHRoOiA3MCU7XG4gICAgbWF4LWhlaWdodDogMTAlO1xuICAgIGJhY2tncm91bmQ6cmVkO1xuXG59XG4uaW5zdHJ1Y2Npb25lc3tcbiAgICBmb250LWZhbWlseTogJ0VCIEdhcmFtb25kJywgc2VyaWY7XG4gICAgZm9udC1zaXplOiB4LWxhcmdlO1xufVxuLnRleHRvLWNvbnRhaW5lcntcbiAgICB3aWR0aDogNzAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kOiBncmV5O1xuICAgIHRleHQtYWxpZ246IGp1c3RpZnk7XG59XG4udGV4dG8tbmVncm97XG4gICAgZm9udC1mYW1pbHk6ICdFQiBHYXJhbW9uZCcsIHNlcmlmO1xuICAgIGZvbnQtc2l6ZTogeC1sYXJnZTtcbn1cbi50ZXh0by1yb2pve1xuICAgIGZvbnQtZmFtaWx5OiAnRUIgR2FyYW1vbmQnLCBzZXJpZjtcbiAgICBmb250LXNpemU6IHgtbGFyZ2U7XG4gICAgY29sb3I6cmVkO1xufSJdfQ== */\"]\n});","map":{"version":3,"sources":["/home/ggomez/Escritorio/KeyBoardTale/src/app/layout/layout.component.ts","/home/ggomez/Escritorio/KeyBoardTale/src/app/layout/layout.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.scss']\n})\nexport class LayoutComponent implements OnInit {\n\n\n  cagada = \"No estan los archivos la concha de la lora\";\n  texts: string[][] = [[],[]]; // textos divididos en substrings\n  currentText: number = 0; // texto al que pertenece el subtring que se esta mostrando\n  currentSub: number = 0; // substring que se muestra en pantalla\n  instructions: string= \"\"; // instrucciones del juego\n  substringInput: number[][][]; // lleva la cantidad de veces que se ingreso cada letra: [texto][substring][cant. letra]\n  substringScore: number[][][]; // lleva el puntaje de cada substring: [texto][substring][puntaje por letra]\n  substringSound: number[][][]; // indica que sonido suena cuando se apreta x tecla en y substring de z texto\n  substringValue: number[][][];\n  minValues: number[][][]; // puntaje minimo del substring para pasar al siguiente\n  \n  //audios: Audio[] = [];\n  alreadyShown: string = \"\";\n  playerInput: string = \"\"; // lo que el jugador esta ingresando en tiempo real\n\n\n  audios: HTMLAudioElement[] = []; // coleccion de todos los audios\n\n  constructor() { \n    this.substringInput=[];\n    this.substringScore=[];\n    this.substringSound=[];\n    this.substringValue=[];\n    this.minValues=[];\n  }\n\n  ngOnInit(){\n    this.fetchTexts().then( () =>\n      this.fetchSound()\n    ).then( () => {\n      this.initializeMatrixes();\n      this.setMinValues();\n      this.setSounds();\n      this.setSubstringValues();\n      document.addEventListener( 'keydown', (event) => {\n        this.processInput(event.key);\n      });\n      this.cagada = \"Si estan los archivos\";\n    }\n    );\n  }\n  \n  \n  setSubstringValues() {\n    for(let t = 0; t<this.texts.length; t++){\n      for(let s = 0; s<this.texts[t].length; s++){\n        for(let i:number=0; i<this.texts[t][s].length; i++){\n          if (65<=this.texts[t][s].charCodeAt(i) && this.texts[t][s].charCodeAt(i)<=90){ // mayusculas\n            this.substringValue[t][s][this.texts[t][s].charCodeAt(i)-55]+=1;\n          }else if (97<=this.texts[t][s].charCodeAt(i) && this.texts[t][s].charCodeAt(i)<=122){ // minusculas\n            this.substringValue[t][s][this.texts[t][s].charCodeAt(i)-87]+=1;\n          }else if (48<=this.texts[t][s].charCodeAt(i) && this.texts[t][s].charCodeAt(i)<=57){ // numeros\n            this.substringValue[t][s][this.texts[t][s].charCodeAt(i)-48]+=1;\n          }\n        }\n      }\n    }\n    console.log('values: ',this.substringValue[0]);\n  }\n  \n  async setSounds() {\n    let result = await fetch('/assets/texts/indiceAudios.txt').then(data => data.text());\n    let instances = result.match(/.*Audio\\.txt/g);\n    for (let i=0; i<instances!.length; i++){\n      let j=0;\n      await fetch('/assets/texts/'+instances![i]).then( data => data.text() ).then( text => {\n        let arrays = text.match(/\\[(.*)\\]/g);\n        arrays!.forEach( value => {\n          this.substringSound[i][j]=this.textToValues(value);\n          j++;\n        });\n      });\n    }\n  }\n\n  async setMinValues() {\n    let result = await fetch('/assets/texts/indiceValores.txt').then(data => data.text());\n    let instances = result.match(/.*Valores\\.txt/g);\n    for (let i=0; i<instances!.length; i++){\n      let j=0;\n      await fetch('/assets/texts/'+instances![i]).then( data => data.text() ).then( text => {\n        let arrays = text.match(/\\[(.*)\\]/g);\n        arrays!.forEach( value => {\n          this.minValues[i][j]=this.textToValues(value);\n          j++;\n        });\n      });\n    }\n  }\n  \n  textToValues(value: string): number[] {\n    let valuesArray: number[] = [];\n    value.split(/\\[|\\]/)[1].split(',').forEach(value => valuesArray.push(+value));\n    return valuesArray;\n  }\n\n  async fetchTexts(){\n    await fetch('/assets/texts/instrucciones.txt').then( data => data.text() ).then(text => this.instructions=text);\n    let result = await fetch('/assets/texts/indice.txt').then(data => data.text());\n    let instances = result.match(/([a-z]*[A-Z]*[0-9]*)*\\.txt/g);\n    for (let i=0; i<instances!.length; i++){\n      let j=0;\n      await fetch('/assets/texts/'+instances![i]).then( data => data.text() ).then( text => {\n        this.textToFrases(text).forEach( frase => {\n          this.texts[i][j]=frase\n          j++;\n        });\n      });\n    }\n  }\n\n  textToFrases(text: string): string[]{\n    let ret: string[] = [];\n    text.split(/\\|\\|\\|/).forEach(frase => {\n      ret.push(frase);\n    });\n    return ret;\n  }\n\n  async fetchSound(){\n    let result: string = \"\";\n    await fetch('/assets/sounds/audios.txt').then( data => data.text() ).then( text => result=text);\n    let instances = result.match(/(.*\\.wav)/g);\n    for (let i=0; i<instances!.length; i++){\n      this.audios.push(new Audio('/assets/sounds/'+instances![i]));\n    }\n  }\n\n  processInput(text: string){\n    for(let i:number=0; i<text.length; i++){\n      if (65<=text.charCodeAt(i) && text.charCodeAt(i)<=90){ // mayusculas\n          this.substringInput[this.currentText][this.currentSub][text.charCodeAt(i)-55]+=1;\n          if (this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i)-55]!==0) this.audios[this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i)-55]].play();\n      }else if (97<=text.charCodeAt(i) && text.charCodeAt(i)<=122){ // minusculas\n          this.substringInput[this.currentText][this.currentSub][text.charCodeAt(i)-87]+=1;\n          if (this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i)-87]!==0) this.audios[this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i)-87]].play();\n      }else if (48<=text.charCodeAt(i) && text.charCodeAt(i)<=57){ // numeros\n          this.substringInput[this.currentText][this.currentSub][text.charCodeAt(i)-48]+=1;\n          if (this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i)-48]!==0) this.audios[this.substringSound[this.currentText][this.currentSub][text.charCodeAt(i)-48]].play();\n      }\n    }\n    this.playerInput=\"\"\n    this.calculateScore();\n  }\n\n  initializeMatrixes(){\n    for(let t = 0; t<this.texts.length; t++){\n      this.substringInput[t]=new Array();\n      this.substringScore[t]=new Array();\n      this.substringSound[t]=new Array();\n      this.substringValue[t]=new Array();\n      this.minValues[t]=new Array();\n      for(let s = 0; s<this.texts[t].length; s++){\n        this.substringInput[t][s]=new Array();\n        this.substringScore[t][s]=new Array();\n        this.substringSound[t][s]=new Array();\n        this.substringValue[t][s]=new Array();\n        this.minValues[t][s]=new Array();\n        for(let n = 0; n<37; n++){\n          this.substringInput[t][s][n]=0;\n          this.substringScore[t][s][n]=0;\n          this.substringSound[t][s][n]=0;\n          this.substringValue[t][s][n]=0;\n          this.minValues[t][s][n]=0;\n        }\n      }\n    }\n  }\n\n  calculateScore(){\n    let ret = true;\n    for(let i = 0; i<this.substringScore[0][0].length; i++){\n      if(this.substringValue[this.currentText][this.currentSub][i]!==0){\n        this.substringScore[this.currentText][this.currentSub][i]=\n          this.substringInput[this.currentText][this.currentSub][i] /\n          this.substringValue[this.currentText][this.currentSub][i];\n      }else{\n        this.substringScore[this.currentText][this.currentSub][i]=1;\n      }\n    }\n    let index=0;\n    while(ret && index<this.substringScore[0][0].length){\n      ret=this.substringScore[this.currentText][this.currentSub][index]>=this.minValues[this.currentText][this.currentSub][index];\n      index++;\n    }\n    console.log(this.substringScore[this.currentText][this.currentSub]);\n    console.log(this.minValues[this.currentText][this.currentSub]);\n    if (ret) this.nextSub();\n  }\n\n  nextSub(){\n    if(this.currentSub<this.texts[this.currentText].length-1){\n      this.alreadyShown+=this.texts[this.currentText][this.currentSub];\n      this.currentSub++;\n    }else if(this.currentText<this.texts.length-1){\n      this.currentText++;\n      this.currentSub=0;\n    }else{\n      //something something\n    }\n  }\n\n  // determineColor(text: string): string{\n  //   let newText = \"\";\n  //   text.split(' ').forEach( word => {\n  //     let aux = word.match(/\\[(.)\\/([b|g|r|y])\\]/gm);\n  //     let color = \"\";\n  //     if(aux){\n  //       aux.forEach( values => {\n  //         let data = values.match(/(.)\\/(.)/);\n  //         if (data![2]==\"r\") {\n  //           color='red';\n  //         }else if (data![2]==\"g\") {\n  //           color='green';\n  //         }\n  //         else if (data![2]==\"b\") {\n  //           color='blue';\n  //         }\n  //         else if (data![2]==\"y\") {\n  //           color='yellow';\n  //         }\n  //         let regex = new RegExp('\\\\['+data![1]+'\\/'+data![2]+'\\\\]');\n  //         word = word.replace(regex, '<span style=color:'+color+'>'+data![1]+'</span>');\n  //       });\n  //     }\n  //     newText += word+' ';\n  //   });\n  //   return newText;\n  // }\n}\n","<div style=\"width: 100%; height: 100%; display:flex; flex-direction: column; justify-content: space-between;\">\n    <div>\n        <app-header></app-header>\n    </div> \n    LPM\n    <!-- <div class=\"container\">\n        <div class=\"content-container\">\n            <div class=\"instrucciones-container\">\n                <div class=\"instrucciones\">\n                    {{instructions}}\n                </div>\n            </div>\n            <div class=\"texto-container\">\n                <div class=\"texto-negro\">\n                    {{alreadyShown}}\n                </div>\n                <div class=\"texto-rojo\">\n                    {{texts[currentText][currentSub]}}\n                </div>\n                <div style=\"align-self: flex-end;\">\n                </div>\n            </div>\n        </div>\n    </div> -->\n    <app-footer></app-footer>\n</div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}